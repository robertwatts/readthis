---
import { getBookDetails } from '../../services/bookService.ts';

export async function getStaticPaths() {
  // Return an empty array to allow on-demand generation
  return [];
}

const { isbn } = Astro.params;
const bookDetails = await getBookDetails(isbn);

// Handle the case where the book is not found
if (!bookDetails) {
  console.log(`Book not found for ISBN: ${isbn}`);
  return (
    <Layout>
      <h1>Book Not Found</h1>
      <p>No details available for ISBN: {isbn}</p>
    </Layout>
  );
}
---

<Layout>
  <h1>Book Details for ISBN: {isbn}</h1>
  <div>
    <h2>{bookDetails.volumeInfo.title}</h2>
    <p>Authors: {bookDetails.volumeInfo.authors.join(', ')}</p>
    <p>Description: {bookDetails.volumeInfo.description}</p>
  </div>
</Layout>
